{% extends 'base.html.twig' %}

{% block title %}
	{{ title }}
{% endblock %}

{% block body %}
	<div class="container-fluid">
		<div
			class="row">
			<!-- tutorial aria -->
			<div class="col-xl-8 col-lg-7">
				<div
					class="card shadow mb-4">
					<!-- Card Header - Dropdown -->
					<div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
						<h6 class="m-0 font-weight-bold text-primary">Videos tutorials</h6>
						{# <div class="dropdown no-arrow">
                            <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                aria-labelledby="dropdownMenuLink">
                                <div class="dropdown-header">Dropdown Header:</div>
                                <a class="dropdown-item" href="#">Action</a>
                                <a class="dropdown-item" href="#">Another action</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#">Something else here</a>
                            </div>
						</div> #}
					</div>
					<!-- Card Body -->
					<div class="card-body">
						<video width="100%" controls="controls" id="videoPlayer" preload="metadata">
							Your browser does not support the video tag.
						</video>
					</br>
					<button type="button" id="prev" class="btn btn-dark btn-sm">&laquo Prev</button>
					<button type="button" id="next" class="btn btn-dark btn-sm">Next &raquo</button>
				</div>
			</div>
		</div>


		<div class="col-xl-4 col-lg-3">

			<ul id="playlist" class="list-group">
				<li class="list-group-item">
					<a href="{{ asset('assets/videos/tutorials/harnesstom_user_intro_tutorial.mp4') }}">
						Introduction to HarnessTom
					</a>
				</li>

				<li class="list-group-item">
					<a href="http://www.w3schools.com/html/movie.mp4">
						3 School Movie
					</a>
				</li>

				<li class="list-group-item">
					<a href="http://www.w3schools.com/html/mov_bbb.mp4">
						Mov 3B
					</a>
				</li>

				<li class="list-group-item">
					<a href="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4">
						ElephantsDream
					</a>
				</li>

				<li class="list-group-item">
					<a href="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4">
						ForBiggerBlazes
					</a>
				</li>
			</ul>
		</div>

	</div>
	<!-- .row -->
</div>
<!-- .container -->
{% endblock %}


{% block javascripts %}
	<script src="{{ asset('assets/js/jquery-3.5.1.js') }}"></script>
    <script src="{{ asset('assets/nl/vendor/jquery/jquery.min.js') }}"></script>
    <script src="{{ asset('assets/nl/vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>

    <!-- Core plugin JavaScript-->
    <script src="{{ asset('assets/nl/vendor/jquery-easing/jquery.easing.min.js') }}"></script>

    <!-- Custom scripts for all pages-->
    <script src="{{ asset('assets/nl/js/sb-admin-2.min.js') }}"></script>

    <!-- Page level plugins -->
    <script src="{{ asset('assets/nl/vendor/chart.js/Chart.min.js') }}"></script>

    <script src="{{ asset('assets/nl/js/jquery-match-height-0.7.2.min.js') }}"></script>
    <script src="{{ asset('assets/nl/js/main.js') }}"></script>

    {% if not app.user %}
        <!-- Guided Tour LH  -->
        <script src="{{ asset('guidedtour/js/jquery-1.10.2.js') }}"></script>
        <script src="{{ asset('guidedtour/dist/js/hopscotch.js') }}"></script>
        <script src="{{ asset('guidedtour/js/demo.js') }}"></script>
    {% endif %}

      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        var myVids = [
            "{{ asset('assets/videos/tutorials/harnesstom_user_intro_tutorial.mp4') }}",
            "http://www.w3schools.com/html/movie.mp4","http://www.w3schools.com/html/mov_bbb.mp4",
            "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
            "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4"
            ];

        var i = 0;
        var prevBtn = document.getElementById('prev');
        var nextBtn = document.getElementById('next');
        var videoPlayer = document.getElementById('videoPlayer');
        videoPlayer.src = myVids[0]+"#t=0.7";

        // for the ul li playlist. start of the ul li playlist tracks
        var playlist = document.getElementById("playlist");
        // get the tracks
        var tracks = playlist.getElementsByTagName('a');
        // have a loop on all the tracks to listen to the clicked one
        Array.from(tracks).forEach((track, index) => {
            track.addEventListener('click', function(e){
                e.preventDefault();
                // clicked source
                videoPlayer.src = this.getAttribute('href');
                //$(this).parent().addClass("list-group-item disabled");
                //console.log($(this).parent());
                this.style.color = "red";
                console.log(this);
                videoPlayer.play();
                i = index;
            });
        });
        // end of the ul li playlist tracks

        videoPlayer.onended = function(){
            videoPlayer.src = myVids[i+1];
            videoPlayer.play();
            i++;
            if (i >= myVids.length) {
            i = 0;
            videoPlayer.src = myVids[i];
            videoPlayer.play();
            i++;
            }  
        }

        // prev button 
        prevBtn.addEventListener('click',function(){
            if (i <= 0) {
            videoPlayer.src = myVids[myVids.length-1];
            videoPlayer.play();
            i = myVids.length-1;
            } 
            else {
            videoPlayer.src = myVids[i-1];
            videoPlayer.play();
            i--;
            }
        },false);
        
        // next button 
        nextBtn.addEventListener('click',function(){
            if (i >= myVids.length) {
            videoPlayer.src = myVids[1];
            videoPlayer.play();
            i = 1;
            } else if (i + 1 == myVids.length) {
            videoPlayer.src = myVids[0];
            videoPlayer.play();
            i++;
            }
            else {
            videoPlayer.src = myVids[i+1];
            videoPlayer.play();
            i++;
            }
        },false);
    </script>
    
      
{% endblock %}